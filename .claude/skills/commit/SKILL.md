---
name: commit
description: 絵文字付きの Conventional Commit 形式でコミットを作成します。変更をコミットしたい場合に使用してください。
disable-model-invocation: true
user-invocable: true
allowed-tools: Bash
argument-hint: [--no-verify]
---

# コミット作成スキル

絵文字付きの Conventional Commit 形式で整形されたコミットを作成します。

**重要**: コミットメッセージはすべて日本語で記述してください。

## 実行手順

1. `--no-verify` が指定されていない限り、自動的に事前チェックを実行:
   - `pnpm lint` でコード品質を確認
   - `pnpm build` でビルド成功を確認
   - `pnpm generate:docs` でドキュメントを更新
2. `git status` でステージされたファイルを確認
3. ステージされたファイルが0件の場合、`git add` で変更・新規ファイルを自動追加
4. `git diff` でコミット対象の変更を確認
5. 差分を分析し、複数の論理的な変更が含まれているか判定
6. 複数の変更が検出された場合、コミットを分割することを提案
7. 各コミット（または分割しない場合は単一コミット）に対して、絵文字付き Conventional Commit 形式でメッセージを作成

## コミットのベストプラクティス

- **コミット前の検証**: コードがリント済み、ビルド成功、ドキュメント更新済みであることを確認
- **アトミックコミット**: 各コミットは単一の目的に関連する変更のみを含める
- **大きな変更は分割**: 複数の関心事に触れる変更は別々のコミットに分割
- **Conventional Commit 形式**: `<type>: <説明>` 形式を使用（type は以下のいずれか）:
  - `feat`: 新機能
  - `fix`: バグ修正
  - `docs`: ドキュメント変更
  - `style`: コードスタイル変更（フォーマット等）
  - `refactor`: バグ修正でも機能追加でもないコード変更
  - `perf`: パフォーマンス改善
  - `test`: テストの追加・修正
  - `chore`: ビルドプロセス、ツール等の変更
- **現在形・命令形**: コミットメッセージはコマンドとして記述（例: 「機能を追加」）
- **簡潔な1行目**: 最初の行は72文字以内に収める

## 絵文字ガイド

各コミットタイプには適切な絵文字を付与:

- ✨ `feat`: 新機能
- 🐛 `fix`: バグ修正
- 📝 `docs`: ドキュメント
- 💄 `style`: フォーマット/スタイル
- ♻️ `refactor`: コードリファクタリング
- ⚡️ `perf`: パフォーマンス改善
- ✅ `test`: テスト
- 🔧 `chore`: ツール、設定
- 🚀 `ci`: CI/CD 改善
- 🗑️ `revert`: 変更の取り消し
- 🚨 `fix`: コンパイラ/リンターの警告修正
- 🔒️ `fix`: セキュリティ問題の修正
- 🚚 `refactor`: リソースの移動・リネーム
- 🏗️ `refactor`: アーキテクチャ変更
- ➕ `chore`: 依存関係の追加
- ➖ `chore`: 依存関係の削除
- 🏷️ `feat`: 型定義の追加・更新
- 💬 `feat`: テキスト・リテラルの追加・更新
- 🌐 `feat`: 国際化・ローカライゼーション
- 👔 `feat`: ビジネスロジックの追加・更新
- 🚸 `feat`: UX/ユーザビリティの改善
- 🩹 `fix`: 重要でない問題の簡単な修正
- 🥅 `fix`: エラーハンドリング
- 👽️ `fix`: 外部 API 変更に伴うコード更新
- 🔥 `fix`: コード・ファイルの削除
- 🎨 `style`: コード構造/フォーマットの改善
- 🚑️ `fix`: 緊急ホットフィックス
- 💚 `fix`: CI ビルドの修正
- 📌 `chore`: 依存関係のバージョン固定
- 👷 `ci`: CI ビルドシステムの追加・更新
- 📈 `feat`: 分析・トラッキングコードの追加・更新
- ✏️ `fix`: タイポ修正
- ⏪️ `revert`: 変更の取り消し
- 💥 `feat`: 破壊的変更の導入
- ♿️ `feat`: アクセシビリティの改善
- 💡 `docs`: ソースコード内コメントの追加・更新
- 🗃️ `db`: データベース関連の変更
- 🔊 `feat`: ログの追加・更新
- 🔇 `fix`: ログの削除
- 🙈 `chore`: .gitignore ファイルの追加・更新
- 🚩 `feat`: フィーチャーフラグの追加・更新・削除
- 💫 `ui`: アニメーション・トランジションの追加・更新
- ⚰️ `refactor`: デッドコードの削除
- 🦺 `feat`: バリデーション関連コードの追加・更新

## コミット分割のガイドライン

差分を分析する際、以下の基準でコミット分割を検討:

1. **異なる関心事**: コードベースの無関係な部分への変更
2. **異なる種類の変更**: 機能、修正、リファクタリング等の混在
3. **ファイルパターン**: 異なる種類のファイルへの変更（ソースコード vs ドキュメント等）
4. **論理的グループ**: 別々にした方が理解・レビューしやすい変更
5. **サイズ**: 分解した方がわかりやすい非常に大きな変更

## 良いコミットメッセージの例

- ✨ feat: ユーザー認証システムを追加
- 🐛 fix: レンダリングプロセスのメモリリークを解決
- 📝 docs: 新しいエンドポイントで API ドキュメントを更新
- ♻️ refactor: パーサーのエラーハンドリングロジックを簡素化
- 🚨 fix: コンポーネントファイルのリンター警告を解決
- 👔 feat: トランザクション検証のビジネスロジックを実装
- 🩹 fix: ヘッダーの軽微なスタイリング不整合を修正
- 🚑️ fix: 認証フローの重大なセキュリティ脆弱性を修正
- 🦺 feat: ユーザー登録フォームの入力バリデーションを追加

## コマンドオプション

- `--no-verify`: 事前チェック（lint、build、generate:docs）をスキップ

## 重要な注意事項

- デフォルトでは、コード品質を確保するために事前チェック（`pnpm lint`、`pnpm build`、`pnpm generate:docs`）が実行されます
- チェックが失敗した場合、コミットを続行するか問題を修正するか確認されます
- 特定のファイルが既にステージされている場合、それらのファイルのみをコミットします
- ファイルがステージされていない場合、変更・新規ファイルを自動的にステージします
- コミットメッセージは検出された変更に基づいて作成されます
- コミット前に差分をレビューし、複数コミットが適切かどうか判断します
- 複数コミットを提案する場合、変更を個別にステージ・コミットする手助けをします
- 常にコミット差分をレビューし、メッセージが変更と一致することを確認します

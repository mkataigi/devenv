# プレフィックスキー変更
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# マウス操作を有効化
set -g mouse on

# ウィンドウ番号を1から開始（0は遠い）
set -g base-index 1
setw -g pane-base-index 1

# ウィンドウを閉じた時に番号を詰める
set -g renumber-windows on

# ESCキーの遅延を解消（Vimユーザーに重要）
set -g escape-time 0

# 履歴の行数を増やす
set -g history-limit 10000

# ステータスバーの更新間隔（秒）
set -g status-interval 1

# ペイン分割をより直感的に
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# 新しいウィンドウで現在のディレクトリを引き継ぐ
bind c new-window -c "#{pane_current_path}"

# ペインのリサイズをより簡単に（プレフィックス不要で連続操作）
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Vimライクなペイン移動
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# コピーモードでVimキーバインドを使う
setw -g mode-keys vi

# コピーモードの開始
bind v copy-mode

# Vimライクな選択とコピー（macOS用）
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"
bind -T copy-mode-vi Enter send -X copy-pipe-and-cancel "pbcopy"

# 256色端末を使用
set -g default-terminal "screen-256color"

# ステータスバーの色
set -g status-style bg=black,fg=white

# アクティブなウィンドウを目立たせる
setw -g window-status-current-style bg=blue,fg=white,bold

# ペインボーダーの色
set -g pane-border-style fg=colour240
set -g pane-active-border-style fg=blue

# ステータスバーの位置（上にする場合）
set -g status-position top

# ~/.tmux.confに追加
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'      # 基本的な設定
set -g @plugin 'tmux-plugins/tmux-yank'          # コピー改善
set -g @plugin 'tmux-plugins/tmux-resurrect'    # セッション保存
set -g @plugin 'christoomey/vim-tmux-navigator'  # Vimとの統合

# TPMの初期化（最後に記述）
run '/opt/homebrew/opt/tpm/share/tpm/tpm'
